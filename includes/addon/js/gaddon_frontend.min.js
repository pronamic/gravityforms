var GFFrontendFeeds=function(e){var f=this,r=jQuery;f.init=function(){f.options=e,f.triggerInputIds=f.getTriggerInputIds(f.options.feeds),f.activeFeeds=[],f.evaluateFeeds(),f.bindEvents()},f.bindEvents=function(){gform.addAction("gform_input_change",function(e,o,t){gform.logger.log("GFFrontendFeeds: gform_input_change event triggered. formId "+o+", inputId "+t);var d=parseInt(t)+"",t=-1!==r.inArray(t,f.triggerInputIds)||-1!==r.inArray(d,f.triggerInputIds);f.options.formId==o&&t?(gform.logger.log("GFFrontendFeeds: Evaluating feeds. self.options.formId="+f.options.formId+", isTriggeredInput="+t+", triggerInputIds="+f.triggerInputIds.join(",")),f.evaluateFeeds()):gform.logger.log("GFFrontendFeeds: Bypassing feed evaluation. self.options.formId="+f.options.formId+", isTriggeredInput="+t+", triggerInputIds="+f.triggerInputIds.join(","))})},f.saveToState=function(){var e=f.options.feeds.map(({feedId:e,isActivated:o,transactionType:t})=>({feedId:e,isActivated:o,transactionType:t}));console.log("Saving feeds to state:",e),gform.logger.log("GFFrontendFeeds: Saving feeds to state: "+JSON.stringify(e)),gform.state.set(f.options.formId,"feeds",f.options.feeds)},f.evaluateFeeds=function(){var e,o,t;for(i=0;i<f.options.feeds.length;i++)e=f.options.feeds[i],o=f.evaluateFeed(e,f.options.formId),t=f.isFeedActivated(e),o||null===t?!o||t||e.isSingleFeed&&(e.isSingleFeed,!f.hasPriority(e.feedId,e.addonSlug))||f.activateFeed(e):f.deactivateFeed(e);gform.doAction("gform_frontend_feeds_evaluated",f.options.feeds,f.options.formId,f),gform.doAction("gform_frontend_feeds_evaluated_{0}".gformFormat(f.options.formId),f.options.feeds,f.options.formId,f),gform.doAction("gform_{0}_frontend_feeds_evaluated".gformFormat(e.addonSlug),f.options.feeds,f.options.formId,f),gform.doAction("gform_{0}_frontend_feeds_evaluated_{0}".gformFormat(e.addonSlug,f.options.formId),f.options.feeds,f.options.formId,f),f.saveToState()},f.evaluateFeed=function(e,o){return!e.conditionalLogic||"show"==gf_get_field_action(o,e.conditionalLogic)},f.getTriggerInputIds=function(){for(var e=[],o=0;o<f.options.feeds.length;o++){var t=f.options.feeds[o];if(t.conditionalLogic)for(var d=0;d<t.conditionalLogic.rules.length;d++){var n=f.options.feeds[o].conditionalLogic.rules[d];-1==r.inArray(n.fieldId,e)&&e.push(n.fieldId)}}return e},f.isFeedActivated=function(e){return!("object"!=typeof e&&!(e=f.getFeed(e)))&&(void 0!==e.isActivated?e.isActivated:null)},f.getFeed=function(e){for(var o=0;o<f.options.feeds.length;o++){var t=f.options.feeds[o];if(t.feedId==e)return t}return!1},f.getFeedsByAddon=function(e,o,t){for(var d=[],n=0;n<f.options.feeds.length;n++){var r=f.options.feeds[n];r.addonSlug!=e||o&&r.feedId==o.feedId||t&&!f.isFeedActivated(r)||d.push(r)}return d},f.activateFeed=function(e){e.feedId&&(e=[e]);for(var o=0;o<e.length;o++){var t=e[o];t.isActivated=!0,gform.doAction("gform_frontend_feed_activated",t,f.options.formId),gform.doAction("gform_frontend_feed_activated_{0}".gformFormat(f.options.formId),t,f.options.formId),gform.doAction("gform_{0}_frontend_feed_activated".gformFormat(t.addonSlug),t,f.options.formId),gform.doAction("gform_{0}_frontend_feed_activated_{0}".gformFormat(t.addonSlug,f.options.formId),t,f.options.formId),t.isSingleFeed&&f.deactivateFeed(f.getFeedsByAddon(t.addonSlug,t))}},f.deactivateFeed=function(e){e.feedId&&(e=[e]);for(var o=0;o<e.length;o++){var t=e[o],d=f.isFeedActivated(t);null!==d&&!1!==d&&(t.isActivated=!1,gform.doAction("gform_frontend_feed_deactivated",t,f.options.formId),gform.doAction("gform_frontend_feed_deactivated_{0}".gformFormat(f.options.formId),t,f.options.formId),gform.doAction("gform_{0}_frontend_feed_deactivated".gformFormat(t.addonSlug),t,f.options.formId),gform.doAction("gform_{0}_frontend_feed_deactivated_{0}".gformFormat(t.addonSlug,f.options.formId),t,f.options.formId))}},f.hasPriority=function(e,o){for(var t=f.getFeedsByAddon(o),d=0;d<=t.length;d++){var n=t[d];if(n.feedId!=e&&n.isActivated)return!1;if(n.feedId==e)return!0}return!1},this.init()};